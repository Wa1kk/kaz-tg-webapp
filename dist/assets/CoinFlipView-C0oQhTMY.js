import{_ as d,i as p,c as u,b as t,q as c,v as b,s as h,n as l,t as f,e as v,f as m}from"./index-BrsEyug6.js";const a="/assets/coin-CAgD55vt.png",g={setup(){return{user:p()}},data(){return{betAmount:100,isFlipping:!1,result:"",resultClass:"",currentSide:null}},computed:{coinClass(){return{flipping:this.isFlipping,heads:this.currentSide==="drip",tails:this.currentSide==="sauce"}}},methods:{handleBetInput(){this.$refs.betInput.blur()},resetFormPosition(){window.scrollTo({top:0,behavior:"smooth"})},setBetAmount(o){this.betAmount=Math.min(o,this.user.money)},flipCoin(o){this.isFlipping||this.betAmount<=0||this.betAmount>this.user.money||(this.user.minusMoney(this.betAmount),this.isFlipping=!0,this.result="",this.resultClass="",this.currentSide=null,setTimeout(()=>{const s=Math.random()<.5;this.currentSide=s?o:o==="drip"?"sauce":"drip",setTimeout(()=>{this.isFlipping=!1,this.currentSide===o?(this.result=`Победа! +${this.betAmount*2}₽`,this.resultClass="win",this.user.addMoney(this.betAmount*2)):(this.result=`Проигрыш! -${this.betAmount}₽`,this.resultClass="loss")},2e3)},2e3))}}},A={class:"coin-flip-game"},C={class:"bet-controls"},y=["max"],_={class:"game-area"},F={class:"choice-buttons"},B=["disabled"],S=["disabled"];function k(o,s,x,r,e,i){return m(),u("div",A,[t("div",C,[c(t("input",{ref:"betInput",type:"number","onUpdate:modelValue":s[0]||(s[0]=n=>e.betAmount=n),min:"1",max:r.user.money,placeholder:"Сумма ставки",class:"bet-input",onBlur:s[1]||(s[1]=(...n)=>i.resetFormPosition&&i.resetFormPosition(...n)),onKeyup:s[2]||(s[2]=h((...n)=>i.handleBetInput&&i.handleBetInput(...n),["enter"]))},null,40,y),[[b,e.betAmount,void 0,{number:!0}]]),t("button",{onClick:s[3]||(s[3]=n=>i.setBetAmount(r.user.money)),class:"max-bet-btn"},"МАКС")]),t("div",_,[t("div",{class:l(["coin-container",{flipping:e.isFlipping}])},[t("div",{class:l(["coin",i.coinClass])},s[6]||(s[6]=[t("div",{class:"front"},[t("img",{src:a,alt:"Дрип"}),t("span",null,"ДРИП")],-1),t("div",{class:"back"},[t("img",{src:a,alt:"Соус"}),t("span",null,"СОУС")],-1)]),2)],2),e.result?(m(),u("div",{key:0,class:l(["result",e.resultClass])},f(e.result),3)):v("",!0)]),t("div",F,[t("button",{onClick:s[4]||(s[4]=n=>i.flipCoin("drip")),disabled:e.isFlipping||e.betAmount<=0||e.betAmount>r.user.money,class:"choice-btn drip-btn"},"ДРИП",8,B),t("button",{onClick:s[5]||(s[5]=n=>i.flipCoin("sauce")),disabled:e.isFlipping||e.betAmount<=0||e.betAmount>r.user.money,class:"choice-btn sauce-btn"},"СОУС",8,S)])])}const I=d(g,[["render",k],["__scopeId","data-v-b513933f"]]);export{I as default};
