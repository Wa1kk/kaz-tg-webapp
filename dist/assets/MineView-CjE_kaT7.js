import{_ as R,i as p,j as c,o as I,k as j,l as _,c as a,m as q,p as P,T as H,b as i,t as v,F as x,r as J,e as y,q as Q,v as X,s as Y,n as T,f as l,x as Z,g as k}from"./index-BavW3UvP.js";const W=d=>{let t=d.toFixed(2);return t=t.replace(/\.?0+$/,""),t.replace()},$={setup(){const d=p(),t=c(10),o=c(5),e=c(Array(25).fill(!1)),b=c(!1),u=c([]),s=c(1),r=c(!1),m=c(!1),w=c(!1),C=c({amount:0,multiplier:1}),g=c(null),B=c({width:"0px",height:"0px",top:"0px",left:"0px"}),h=()=>{if(g.value){const n=g.value.getBoundingClientRect();B.value={width:`${n.width}px`,height:`${n.height}px`,top:`${n.top}px`,left:`${n.left}px`}}};I(()=>{h(),window.addEventListener("resize",h)}),j(()=>{h()});const O=_(()=>b.value&&!r.value&&!m.value),M={1:[1.03,1.07,1.12,1.17,1.23,1.3,1.38,1.47,1.57,1.68,1.77,1.87,1.97,2.08,2.2,2.32,2.45,2.59,2.73,2.88,3.04,3.21,3.39,3.58],2:[1.06,1.13,1.21,1.3,1.4,1.52,1.65,1.8,1.97,2.17,2.35,2.54,2.75,2.98,3.23,3.5,3.79,4.1,4.44,4.81,5.21,5.64,6.11],3:[1.09,1.24,1.43,1.65,1.93,2.27,2.69,3.23,3.92,4.83,5.7,6.73,7.94,9.37,11.06,13.05,15.4,18.18,21.46,25.33,29.9,35.29],4:[1.12,1.29,1.5,1.76,2.08,2.48,2.98,3.62,4.44,5.52,6.59,7.87,9.4,11.23,13.41,16.01,19.12,22.83,27.26,32.56,38.88],5:[1.19,1.51,1.93,2.49,3.27,4.36,5.92,8.2,11.62,16.9,25.34,39.42,64.06,89.57,125.24,175.11,244.84,342.33,478.64,669.23],6:[1.25,1.65,2.2,2.95,3.99,5.45,7.52,10.5,14.88,21.45,29.43,40.38,55.4,76.01,104.28,143.07,196.28,269.28,369.44],7:[1.32,1.86,2.68,3.93,5.89,9.11,14.43,23.6,40.13,71.34,133.76,213.14,339.62,541.16,862.3,1374.02,2189.41,3488.68],8:[1.4,2.05,3.05,4.6,7.03,10.89,17.15,27.6,45.4,76.5,119.44,186.48,291.15,454.57,709.72,1108.09,1730.07],9:[1.48,2.25,3.47,5.42,8.6,13.85,22.7,38,65.2,114.5,185.83,301.59,489.47,794.39,1289.26,2092.41],10:[1.55,2.45,3.95,6.45,10.65,17.9,30.7,53.8,96.5,176,298.08,504.84,855.02,1448.1,2452.56],11:[1.71,2.7,4.35,7.1,11.72,19.69,33.77,59.18,106.15,193.6,327.89,555.32,940.52,1592.91],12:[1.88,2.97,4.79,7.81,12.89,21.66,37.15,65.1,116.77,212.96,360.68,610.85,1034.57],13:[2.07,3.27,5.27,8.59,14.18,23.83,40.87,71.61,128.45,234.26,396.75,671.94],14:[2.28,3.6,5.8,9.45,15.6,26.21,44.96,78.77,141.29,257.69,436.42],15:[2.51,3.96,6.38,10.39,17.16,28.83,49.46,86.65,155.42,283.46],16:[2.76,4.36,7.02,11.43,18.88,31.71,54.41,95.32,170.96],17:[3.04,4.8,7.72,12.57,20.77,34.88,59.85,104.85],18:[3.34,5.28,8.49,13.83,22.85,38.37,65.84],19:[3.67,5.81,9.34,15.21,25.14,42.21],20:[4.04,6.39,10.27,16.73,27.65],21:[4.44,7.03,11.3,18.4],22:[4.88,7.73,12.43],23:[5.37,8.5,15],24:[25]},V=n=>{G(),n.target.blur(),setTimeout(()=>{window.scrollTo(0,0)},50)},E=()=>{setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"}),document.activeElement.blur()},100)},N=()=>{if(t.value>d.money)return;b.value=!0,d.minusMoney(t.value),u.value=[],e.value=Array(25).fill(!1);const n=new Set;for(;n.size<o.value;)n.add(Math.floor(Math.random()*25));n.forEach(f=>e.value[f]=!0),s.value=1,r.value=!1,m.value=!1},F=n=>{if(!(r.value||m.value||u.value.includes(n))){if(e.value[n]){r.value=!0,m.value=!1;return}u.value.push(n),s.value=M[o.value][u.value.length-1]||1,u.value.length===25-o.value&&S()}},S=()=>{const n=t.value*s.value;d.addMoney(n),m.value=!0,r.value=!1,h(),C.value={amount:n.toLocaleString("ru-RU"),multiplier:s.value},w.value=!0,setTimeout(()=>{w.value=!1},4e3)},L=_(()=>{var f;const n=((f=M[o.value])==null?void 0:f[24-o.value])||1;return Math.floor(t.value*n).toLocaleString("ru-RU")}),U=_(()=>W(t.value*A.value)),D=_(()=>W(t.value*s.value)),A=_(()=>{var f;const n=u.value.length;return((f=M[o.value])==null?void 0:f[n])||null}),K=()=>{const n=t.value+100;t.value=Math.min(n,d.money)},z=()=>{const n=t.value-100;t.value=Math.max(n,1)},G=()=>{t.value>d.money&&(t.value=d.money),t.value<1&&(t.value=1)};return{user:d,bet:t,mines:o,grid:e,revealed:u,multiplier:s,gameOver:r,isCashOut:m,isGameActive:O,startGame:N,revealCell:F,cashOut:S,isGameStarted:b,nextMultiplier:A,currentWin:D,nextStepWin:U,maxWin:L,increaseMines:()=>{o.value<24&&o.value++},decreaseMines:()=>{o.value>1&&o.value--},increaseBet:K,decreaseBet:z,validateBet:G,handleEnterKey:V,restoreScroll:E,showWinNotification:w,winDetails:C,balanceBox:g,notificationStyle:B}}},ee={class:"main-container"},te={class:"win-amount"},ie={class:"win-multiplier"},se={class:"balance-box",ref:"balanceBox"},ne={class:"balance-content"},ae={class:"balance-value"},le={class:"grid"},oe=["onClick"],ce={class:"container-two"},re={class:"info-container"},de={key:0,class:"info-box"},ve={class:"info-item"},ue={class:"info-value"},me={class:"info-item"},fe={class:"mine-select"},_e={class:"mine-controls"},be=["disabled"],he={class:"mine-display"},xe={class:"mine-value"},ye=["disabled"],we={key:1,class:"info-box"},ge={class:"info-item"},Me={class:"info-value"},ke={class:"multiplier-box"},Ce={class:"current-multiplier"},Be={key:0,class:"next-multiplier"},Se={class:"bet-container"},Ae={class:"bet-controls"},Ge=["disabled"],Te={class:"bet-display"},We=["max","disabled"],Oe={key:0,class:"bet-label"},Ve=["disabled"],Ee={key:0,class:"cash-out-content"},Ne={class:"cash-out-amount"},Fe={key:1};function Le(d,t,o,e,b,u){return l(),a("div",ee,[q(H,{name:"fade"},{default:P(()=>[e.showWinNotification?(l(),a("div",{key:0,class:"win-notification",style:Z(e.notificationStyle)},[i("div",te,"Ваш выигрыш: "+v(e.winDetails.amount)+" ₽",1),i("div",ie,"×"+v(e.winDetails.multiplier.toFixed(2)),1)],4)):y("",!0)]),_:1}),i("div",se,[i("div",ne,[t[9]||(t[9]=i("div",{class:"balance-label"},"Ваш баланс:",-1)),i("div",ae,v(e.user.money.toLocaleString("ru-RU"))+" ₽",1)])],512),i("div",le,[(l(!0),a(x,null,J(e.grid,(s,r)=>(l(),a("div",{key:r,class:T(["cell",{revealed:e.revealed.includes(r),mine:(e.gameOver||e.isCashOut)&&s,inactive:!e.isGameActive}]),onClick:m=>e.isGameActive?e.revealCell(r):null},[e.revealed.includes(r)?(l(),a(x,{key:0},[k(" 💎 ")],64)):e.gameOver&&s?(l(),a(x,{key:1},[k(" 🪤 ")],64)):e.isCashOut&&s?(l(),a(x,{key:2},[k(" 🪤 ")],64)):y("",!0)],10,oe))),128))]),i("div",ce,[i("div",re,[e.isGameActive?(l(),a("div",we,[i("div",ge,[t[12]||(t[12]=i("div",{class:"info-label"},"Следующий шаг",-1)),i("div",Me,v(e.nextStepWin)+" ₽",1)]),i("div",ke,[i("div",Ce,"×"+v(e.multiplier.toFixed(2)),1),e.nextMultiplier?(l(),a("div",Be," ×"+v(e.nextMultiplier.toFixed(2)),1)):y("",!0)])])):(l(),a("div",de,[i("div",ve,[t[10]||(t[10]=i("div",{class:"info-label"},"Макс. выигрыш",-1)),i("div",ue,v(e.maxWin)+" ₽",1)]),i("div",me,[i("div",fe,[i("div",_e,[i("button",{class:"mine-btn",onClick:t[0]||(t[0]=(...s)=>e.decreaseMines&&e.decreaseMines(...s)),disabled:e.mines<=1},"<",8,be),i("div",he,[i("div",xe,v(e.mines),1),t[11]||(t[11]=i("div",{class:"mine-label"},"капканов",-1))]),i("button",{class:"mine-btn",onClick:t[1]||(t[1]=(...s)=>e.increaseMines&&e.increaseMines(...s)),disabled:e.mines>=24},">",8,ye)])])])]))]),i("div",Se,[i("div",Ae,[i("button",{class:"bet-btn",onClick:t[2]||(t[2]=(...s)=>e.decreaseBet&&e.decreaseBet(...s)),disabled:e.bet<=100||e.isGameActive},"-",8,Ge),i("div",Te,[Q(i("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=s=>e.bet=s),min:1,max:e.user.money,disabled:e.isGameActive,class:"bet-input",onChange:t[4]||(t[4]=(...s)=>e.validateBet&&e.validateBet(...s)),onBlur:t[5]||(t[5]=(...s)=>e.restoreScroll&&e.restoreScroll(...s)),onKeyup:t[6]||(t[6]=Y((...s)=>e.handleEnterKey&&e.handleEnterKey(...s),["enter"]))},null,40,We),[[X,e.bet,void 0,{number:!0}]]),e.isGameActive?(l(),a("div",Oe,"Ваша ставка:")):y("",!0)]),i("button",{class:"bet-btn",onClick:t[7]||(t[7]=(...s)=>e.increaseBet&&e.increaseBet(...s)),disabled:e.isGameActive},"+",8,Ve)]),i("button",{class:T(["action-btn",{"cash-out-btn":e.isGameActive}]),onClick:t[8]||(t[8]=s=>e.isGameActive?e.cashOut():e.startGame())},[e.isGameActive?(l(),a("div",Ee,[i("div",Ne,v(e.currentWin)+" ₽",1),t[13]||(t[13]=i("div",{class:"cash-out-text"},"Забрать",-1))])):(l(),a("span",Fe,"Играть"))],2)])])])}const ze=R($,[["render",Le],["__scopeId","data-v-8426ca8b"]]);export{ze as default};
